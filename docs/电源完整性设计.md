---
id: 电源完整性设计
title: 电源完整性设计
---

电源完整性是指电源波形的质量，研究的是电源分配网络（PDN）。并从系统供电网络综合考虑，消除 / 降低噪声对电源的影响。电源完整性的设计目标是把电源噪声控制在运行的范围内，为芯片提供干净稳定的电压，并使它能够维持在一个很小的容差范围内（通常为 5% 以内），实时响应负载对电流的快速变化，并能够为其他信号提供低阻抗的回流路径。

电源噪声的主要来源：

- 供电模块（VRM，包括 LDO/DC-DC）的输出噪声
- 走线的直流电阻与寄生电感
- 同步开关噪声（SSN）
- 电源与地平面谐振噪声
- 临近电源网络耦合噪声
- 其他部件耦合噪声

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211220113527.png)

大量的芯片引脚在进行逻辑状态切换时，会有一个大的瞬态电流流过回路，造成地平面的波动，会造成芯片的地与系统地不一致，称为地弹；造成芯片和系统的电源有差压，称为电源弹。在进行 PCB 叠层设计时，尽可能增大电源平面叠层之间的垂直距离，减少电源平面和地平面之间的垂直间距。

## 电源完整性设计策略

- 关注过孔、走线和电源平面的通流能力；当在一个平面上布置多个电源时，需要进行电源平面的分割，分割方式要简洁合理，分割区域的大小要满足载流能力的要求；
- 尽可能使电源平面与地平面成对相邻出现，且尽可能接近；
- 关注去耦电容的设计，电容的去耦作用是有一定的距离要求的，即去耦半径。电容焊盘的扇出方式推荐采用多过孔的方式。
- 关注同步开关噪声（SSN，地弹和电源弹）的影响，可增加去耦电容；在满足系统整体性能需求前提下，尽可能使用平缓的驱动信号（减缓驱动器的上升沿和下降沿时间）

## 电源完整性的测试项目

### 电压值（精度）

- 测试仪器：万用表
- 测试方法：分别在测试空载 / 满载下测试
- 测试点：电源芯片输出管脚、用电芯片的电源管脚
- 合格标准：一般在标称电压值 ±5% 范围内（根据芯片的电压要求来确定）

### 电源噪声 / 纹波

- 定义
  - 纹波：出现在输出端子间的一种与输入频率和开关频率同步的成分，用有效值表示，一般在输出电压的 0.5% 以下
  - 噪声：出现在输出端子间的纹波以外的一种高频成分，也用峰 - 峰（peak to peak）值表示，一般在输出电压的 1% 以下
  - 纹波噪声：两者合成，用峰 - 峰（peak to peak）值表示，要求一般在输出电压的 2% 以下
- 测试仪器：示波器
- 测试方法
  - 分别在测试空载 / 满载下测试
  - 纹波：采用地线环靠接测量法（靠接测量），示波器设置带宽（bandwidth）为 20MHz，直流偏置电压（offset）为上面电压精度测量值。
  - 纹波噪声：把示波器带宽设置成全带宽（Full）
- 测试点：输出电容两端
- 合格标准：
  - 一般要求纹波 < 输出电压的 1%（在 20MHz 带宽下测试，结果可视为单纯的纹波）
  - 一般要求纹波噪声 < 输出电压的 2%（在全带宽下测试，结果可视为纹波 + 噪声）
- 注意事项
  - 测试时注意就近原则，保持地环线最短
  - 测试使用无源探头
  - 测试纹波时记录其频率，以便分析

### 电压上下电波形

- 测试仪器：示波器
- 测试方法：示波器设置为上升 / 下降沿触发，开关电源观察上下电波形，能完整显示出来以看出问题
- 测试点：电源芯片的输出管脚、系统上的电源线
- 合格标准
  - 电源输出端电压上下电过冲一般要求不超过被测电压的 10％。在芯片前端测试时，可参考电平通用标准
  - 电源上电时电压不得有很大的跌落，下电时不能有很大的反冲和回勾（跌落和反冲不能跨越芯片启动工作电压），如出现台阶现象需要评估影响。
  - 如果出现负电压，就需要结合实际情况讨论
  - 注意芯片的上下电时序要求
- 注意事项：需要遍历系统上下电、单板插拔、电源板插拔的情况

### 缓启动电路参数

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211220112247.png)

- 测试仪器：示波器
- 测试方法：使用多通道测试，上电观察时间差
- 测试点：一路在缓启动之前的电路，一路在缓启动之后
- 合格标准
  - 延迟时间（$T_{delay}$）：一般要求其范围 20 ～ 200ms
  - 上升时间（$T_{rise}$，输出电压从 10% 上升到 90% 的时间）：要求其范围越小越好，但同时要求冲击电流满足合格标准
  - 没有多次振荡现象
- 注意事项：需要遍历系统上下电、单板插拔、电源板插拔的情况

### 电源电流和冲击电流

- 测试仪器：示波器
- 测试方法：
  - 电源电流：使用电流探头，观察电源上电电流波形和上电后电流的平稳波形
  - 冲击电流：同上。上电冲击电流最好在冷机时测试（冲击电流最大）；下电冲击电流最好在单板满载时进行
- 测试点：将电流探头卡在被测试电流通路上
- 合格标准
  - 电源电流稳定值不能超过 90％ 最大额定输出电流
  - 冲击电流值不能超过额定输出电流的 5 倍（3 倍以上应引起注意）
  - 任何情况下的电流一定要大于电源的最小负载，且须满足最大容性负载要求
- 注意事项
  - 需要遍历系统上下电、单板插拔、电源板插拔的情况
  - 测试冲击电流，需要取下感性元件如电感，因为感性器件本身具有抑制冲击电流的作用。

### 电源告警信号

- 测试方法：使系统产生告警条件，测试告警信号的电平大小
- 测试点：告警信号的接收末端
- 合格标准：参考电源芯片的规格书

### 冗余电源的均流参数

- 测试方法：用测试电源输出电流的方法，测试冗余电源的每路电流的输出值，比较每路输出电流的大小
- 测试点：冗余电源的每路电流输出链路
- 合格标准：系统电源、其冗余电源（均流）的各路电流输出值相差 10％ 以下

## 参考与致谢

- [电源完整性(PI)概述](https://blog.csdn.net/weixin_40877615/article/details/93598336)
- 《硬件信号质量 SI 测试规范》

> 本篇文章受 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh) 协议保护，转载请注明出处。

