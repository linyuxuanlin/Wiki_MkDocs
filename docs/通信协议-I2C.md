---
id: é€šä¿¡åè®®-I2C
title: é€šä¿¡åè®® - I2C
---

I2Cï¼ˆInter-Integrated Circuitï¼‰æ˜¯ä¸€ç§ä¸²è¡Œé€šè®¯æ€»çº¿ï¼Œå¯å…è®¸å­˜åœ¨å¤šä¸»æœºï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªä¸»æœºåœ¨çº¿ã€‚I2C ç”±ä¸¤æ¡å¼€æ¼ä¿¡å·çº¿ç»„æˆï¼Œæ¥çº¿ç®€å•ï¼Œåˆ©ç”¨ç”µé˜»ä¸Šæ‹‰ï¼Œå…¸å‹ç”µå¹³ä¸ºæ­£é€»è¾‘ 3.3V æˆ– 5Vã€‚ä¼ è¾“é€Ÿç‡åˆ†å¿«é€Ÿæ¨¡å¼ï¼ˆ400Kb/sï¼‰ã€æ ‡å‡†æ¨¡å¼ï¼ˆ100Kb/sï¼‰ã€ä½é€Ÿæ¨¡å¼ï¼ˆ10Kb/sï¼‰ã€‚

åœ¨ I2C æ€»çº¿ä¸Šï¼Œä»æœºä»¥å®ƒçš„ I2C åœ°å€è¢«é€‰æ‹©ã€‚è¿™æ ·å­å¯ä»¥ç”¨åœ¨ä¸€ä¸ªä¸»æœºä¸Šé€šè¿‡ä¸¤æ ¹çº¿æ§åˆ¶å¤šä¸ªä»æœºã€‚

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211026174634.png)

## I2C çš„å¼•è„š

- **SCL**ï¼ˆserial clockï¼‰ï¼šç”±ä¸»æœºäº§ç”Ÿçš„æ–¹æ³¢ï¼Œç”¨æ¥æ§åˆ¶ä¼ è¾“é€Ÿç‡å’Œæ•°æ®çš„é”å­˜ã€‚
- **SDA**ï¼ˆserial dataï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ª **åŠåŒå·¥ã€åŒæ­¥** çš„ä¿¡å·çº¿ï¼Œä¼ è¾“çš„æ•°æ®åŒ…æ‹¬åœ°å€ã€æ§åˆ¶ä¿¡å·ä¸é€šä¿¡æ•°æ®ã€‚

## I2C åœ°å€

- I2C åœ°å€åˆ’åˆ†ï¼Œæ˜¯ 7 bit åœ°å€åŠ ä¸Š 1 bit è¯»å†™æŒ‡ç¤ºã€‚
- I2C æ€»çº¿ä¸Šçš„æ¯ä¸ªè®¾å¤‡éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ï¼Œå¦‚æœåœ°å€é‡å¤ä¼šå‡ºé—®é¢˜ã€‚æœ‰äº›è®¾å¤‡çš„ I2C åœ°å€æ˜¯å¯ä»¥ç¼–ç¨‹è®¾ç½®çš„ã€‚

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211027112717.png)

## I2C é€šä¿¡

- **START**ï¼šä¸»æœºåœ¨ SCL ä¸ºé«˜æ—¶ï¼Œæ‹‰ä½ SDA å‘èµ·ã€‚
- **STOP**ï¼šä¸»æœºåœ¨ SCL ä¸ºé«˜æ—¶ï¼Œé‡Šæ”¾ SDAï¼ˆå˜ä¸ºé«˜ç”µå¹³ï¼‰å‘èµ·ã€‚
- **ACK**ï¼ˆacknowledgeï¼‰ï¼šI2C ä¼ è¾“éƒ½æ˜¯éšç€æ¯ä¸ª SCL è„‰å†²ï¼Œæ¯æ¬¡ä¼ è¾“ 1 ä¸ªå­—èŠ‚ï¼ˆ8 ä¸ªä½ï¼‰ã€‚æ¯æ¬¡ä¼ è¾“çš„ç¬¬ 9 ä¸ªè„‰å†²è¢«ä¿ç•™ä¸ºä»æœºçš„ç¡®è®¤ä¿¡å·ï¼Œæ¯æ¬¡çš„ ACK ä¿¡å·è¡¨ç¤ºå‰ä¸€æ¬¡ä¼ è¾“æˆåŠŸã€‚

### I2C ä¼ è¾“å¥æ®µç¤ºä¾‹

è¿™ä¸€æ®µä¼ è¾“çš„å€¼ä¸º `11001101`ï¼š

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211104172952.png)

1. ä¸»æœºæ‹‰ä½ SDA ç”µå¹³ä»¥äº§ç”Ÿ START ä¿¡å·ã€‚
2. ç¬¬ä¸€ä¸ªä½è¢«è®¾ç½®ï¼Œä¸»æœºæ‹‰ä½ SCLï¼Œå°†æ—¶é’Ÿä¿¡å·ç»è¿‡ DAC è¿›è¡Œè¾“å‡ºã€‚
3. ä¼ è¾“åˆ°ç¬¬ä¹ä¸ªä½æ—¶ï¼Œä¸»æœºä¸ä¼šæ‹‰ä½ SDAï¼Œå¦‚æœä»æœºç¡®è®¤ä¼ è¾“å®Œæ•´ï¼Œåˆ™å°† SDA æ‹‰ä½è®©ä¸»æœºçŸ¥é“ã€‚

### æœ‰æ•ˆçš„æ•°æ®ä¼ è¾“

1. åœ¨ SCL ä¿æŒé«˜ç”µå¹³ï¼ˆä¼ è¾“æ•°æ®ï¼‰æ—¶ï¼ŒSDA åœ¨è¿™æ®µæ—¶é—´å†…å¿…é¡»ä¿æŒç¨³å®šæ‰æœ‰æ•ˆã€‚
2. åœ¨ SCL èŠ‚æ‹é—´çš„ä½ç”µå¹³ï¼Œæ‰å…è®¸ SDA åˆ‡æ¢æ•°å€¼ã€‚
3. å½“ SCL ä¸ºé«˜ç”µå¹³ï¼ŒSDA å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè¢«è§£é‡Šä¸º STARTã€RESTART æˆ– STOP äº‹ä»¶ã€‚

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211105172139.png)

### æ¥å£ç”µè·¯ä¸Šå‡ / ä¸‹é™è®¡æ—¶

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211108093819.png)

å¦‚å›¾ï¼Œæ™¶ä½“ç®¡å°†åœ¨ä½ç”µå¹³æ—¶å¯¼é€šï¼Œå¹¶å°† $C_b$ ç”µå®¹æ”¾ç”µåˆ°ä½ç”µå¹³ã€‚åä¹‹ï¼Œæ™¶ä½“ç®¡å°†åœ¨é«˜ç”µå¹³æ—¶æˆªæ­¢ï¼Œä¸Šæ‹‰ç”µé˜»ä¼šå°† $C_b$ å……ç”µè‡³é«˜ç”µå¹³ã€‚

- $t_r$ï¼ˆä¸Šå‡æ—¶é—´ï¼‰ï¼šä¿¡å·ä»ä½ç”µå¹³è¿‡æ¸¡åˆ°é«˜ç”µå¹³çš„æœ€å¤§æ—¶é—´ã€‚å› ä¸º I2C æ˜¯å¼€æ¼ä¿¡å·ï¼Œæ‰€ä»¥ä¸Šå‡æ—¶é—´ç”±ä¸Šæ‹‰ç”µé˜»å’Œæ€»çº¿ç”µå®¹çš„ RC æ—¶é—´å¸¸æ•°å†³å®šã€‚
- $t_f$ï¼ˆä¸‹é™æ—¶é—´ï¼‰ï¼šä¿¡å·ä»é«˜ç”µå¹³è¿‡æ¸¡åˆ°ä½ç”µå¹³çš„æœ€å¤§æ—¶é—´ã€‚

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211108095142.png)

### I2C ä¸Šæ‹‰ç”µé˜»è®¡ç®—

- ä¸Šæ‹‰ç”µé˜»æœ€å°å€¼ï¼š$R_{Pull(Min)}=\frac{V_{DD}-V_{OLMAX}}{I_{SinkMax}}$
- ä¸Šæ‹‰ç”µé˜»æœ€å¤§å€¼ï¼š$R_{Pull(Max)}=\frac{t_r}{0.8473*C_b}$

å…¶ä¸­ï¼Œä¸Šæ‹‰ç”µé˜»æœ€å°å€¼ä¼šå¸¦æ¥æœ€çŸ­çš„ä¸Šå‡æ—¶é—´ã€‚å¦‚æœç”¨çš„é˜»å€¼æ¯”è¿™ä¸ªå†å°ï¼Œå°±ä¼šå¯¼è‡´å½“è¾“å‡ºæ™¶ä½“ç®¡å¼€å¯ï¼ˆé€»è¾‘ä½ç”µå¹³ï¼‰æ—¶ï¼Œæ¶ˆè€—è¿‡å¤šçš„ç”µæµï¼Œè¿åæœ€å¤§é€»è¾‘ä½ç”µå¹³è¾“å‡ºçš„è§„èŒƒã€‚

ä¸Šæ‹‰ç”µé˜»æœ€å¤§å€¼ä¼šå¸¦æ¥æœ€é•¿çš„ä¸Šå‡æ—¶é—´ã€‚å¦‚æœä½¿ç”¨å¤§äºæ­¤å€¼çš„ä¸Šæ‹‰ç”µé˜»ï¼Œå°†ä¼šè¿åæ—¶åºè¦æ±‚ã€‚

$V_{DD}$ è¡¨ç¤ºä¾›ç”µç”µå‹ï¼›$V_{OLMAX}$ è¡¨ç¤ºæœ€å¤§é€»è¾‘ä½ç”µå¹³ï¼ˆå…¸å‹å€¼ä¸º 0.4Vï¼‰ï¼›$I_{SinkMax}$ è¡¨ç¤ºæœ€å¤§çŒç”µæµï¼ˆå…¸å‹å€¼ä¸º 3mAï¼‰ï¼›$C_b$ è¡¨ç¤ºæ€»çº¿ç”µå®¹ï¼Œå–å†³äº PCB èµ°çº¿çš„é•¿åº¦å’Œå®½åº¦ï¼Œä¸è¿æ¥è‡³æ€»çº¿çš„è®¾å¤‡çš„ç”µå®¹ã€‚

è®¡ç®—ç¤ºä¾‹ï¼š

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211108103406.png)

## å‚è€ƒä¸è‡´è°¢

- ã€ŠAnalog Engineerâ€™s Pocket Referenceã€‹
- [I2C æ€»çº¿è¯¥æ€ä¹ˆç”¨ï¼Ÿçœ‹å®Œä½ å°±ä¼šäº†](https://mp.weixin.qq.com/s/IeL77NTyVdTdkcNtqjjFPA)
- [[ç”µè·¯]I2C æ€»çº¿åè®® ğŸš§](https://zhenhuizhang.tk/post/dian-lu-i2c-zong-xian-xie-yi/)

> æœ¬ç¯‡æ–‡ç« å— [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh) åè®®ä¿æŠ¤ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

