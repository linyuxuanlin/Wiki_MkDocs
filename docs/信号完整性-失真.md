---
id: 信号完整性-失真
title: 信号完整性 - 失真 🚧
---

单一网络上的信号失真问题分为三个方面：**反射、信号质量问题、时序错误**。

## 反射

反射产生的根本原因，是 **信号前进方向的瞬时阻抗发生改变**。有可能造成阻抗发生改变的源头：互连线的末端、走线横截面积改变、换层、返回路径平面上的间隙、附加元件如接插件、布线拓扑结构。

### 反射的来源

#### 阻抗突变处的反射

当传输线上的瞬时阻抗发生突变，部分信号将沿着相反反向反射，另一部分将继续传输，但幅度有改变。反射信号的量值取决于瞬时阻抗的变化量，假设第一个区域瞬时阻抗为 $Z_1$，第二个区域为 &Z_2&，则反射与入射信号幅值之比（反射系数）为：

$\rho=\frac{V_{reflected}}{V_{incident}}=\frac{Z_2-Z_1}{Z_2+Z_1}$

可见，两个区域阻抗相差越多，反射的信号量就越大。举个例子，如果 1V 的信号沿着特性阻抗为 50Ω 的传输线传播，进入特性阻抗为 75Ω 的区域时，反射系数算出来是 20%，则反射的电压为 0.2V。

#### 阻性负载的反射

传输线的端接匹配有三种特殊情况：开路、短路、匹配。以下假设传输线特性阻抗为 50Ω，信号由源端到远端，入射电压为 1V。

终端为开路的情况下，末端瞬时阻抗无穷大，反射系数无限逼近 1，意味着入射的信号全部按照源路径反射回去，开路处入射波和反射波的电压之和为 2V。

终端为短路的情况下（与返回路径相短路），末端阻抗为 0，此时反射系数为 -1。入射信号到达远端时，将产生 -1V 的反射信号，向源端传播，所以此处电压为 0。

终端阻抗与特性阻抗相匹配的情况下（即终端阻抗也为 50Ω），反射系数为 0，此时不会存在反射电压，终端上的电压仅仅是入射信号的。

一般情况下（50Ω 阻抗），区域 2 阻抗与反射系数之间的关系大致如下图：

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220526165010.png)

当区域 2 的阻抗小于区域 1 时，反射系数为负值，反射电压是负电压。假设终端阻性负载为 25Ω，那么反射系数为 -0.33，所以有 -0.33V 的电压被反射回源端，终端实际电压为 1+(-0.33)=0.67V。

### 反弹图

如果知道传输线的时延、信号通过各区域的阻抗与驱动器的初始电压，就可以计算处每个反射面的电压 / 任意一时间的电压。

假设驱动器源电压 1V，内阻 10Ω，传输线末端为开路，那么可以根据反射公式得出下面的反弹图与曲线：

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220105173025.png)

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220105173037.png)

### 反射的表现形式

反射通常表现为过冲、下冲、振铃。

#### 过冲

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211220091443.png)

过冲指的是振荡的第一个峰值，分为正过冲和负过冲。危害是可能会冲击损伤器件（大于 VCC 或小于 GND）。另外，正过冲会形成干扰源，对其他器件造成串扰；负过冲导致管脚上的负电压使器件 PN 衬底（寄生二极管）前向偏置，大电流会熔断产生开路。

#### 振荡（回冲 / 振铃）

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211220094236.png)

回冲指多次跨越电平临界值，而振铃指经过多次反复才回归正常电平。

回冲 / 振铃的危害类似于多次过冲，在高低电平之间是一种不确定的状态。其产生原因是阻抗匹配不当（过大或过小）。

### 反射的解决方法

反射的解决办法，是尽量让互连线的阻抗保持恒定。具体有以下措施：

1. 使用可控阻抗互连
2. 增加电阻匹配，参考做法是始端串电阻或者末端并电阻
3. 采用沿线拓扑的阻抗维持恒定的布线规则，最小化支路长度
4. 对线的几何特征进行精细设计，比如避免直角或锐角
5. PCB 布线避开干扰源和耦合路径

## 时序错误

两个或以上信号路径间的时延差称为错位。当信号线与时钟线存在超出预期的错位时，可能产生误触发和逻辑错误；当差分线存在错位时，部分查问信号可能会变成共模信号，造成失真。

## 参考与致谢

- 《信号完整新与电源完整性分析（第三版）》
- 《信号完整性揭秘-于博士 SI 设计手记》
- [What Every PCB Designer Should Know - Crosstalk Explained (with Eric Bogatin)](https://www.youtube.com/watch?v=EF7SxgcDfCo)
- 《硬件信号质量 SI 测试规范》
- [传输线串扰分析](https://blog.csdn.net/weixin_40877615/article/details/95329866)

> 本篇文章受 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh) 协议保护，转载请注明出处。


---

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20211220093258.png)

信号边沿缓慢的产生原因也有可能是是驱动能力不够，或者负载过大（例如链路阻抗太大）。

解决信号边沿缓慢的方法是：

1. 提高驱动能力；
2. 减小负载。

由于驱动不足或者负载过大，信号边沿缓慢也常伴随着信号幅度较低的现象。

---

## 上升沿退化

### 有损线的不良影响

边沿快速变化的信号经过一段实际的传输线后，上升沿将被拉长：

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220105174702.png)

上升沿退化导致的信号质量问题，是因为导线 / 介质中与频率相关的损耗，这种损耗高频比低频更大，会导致信号边沿缓慢。当上升沿退化到接近信号的单位间隔时，1bit 的信息将会泄露到下一个甚至下几个 bit，会造成数据采样错误。这种效应称为符号间干扰（ISI），在数据率大于或等于 1Gbps 时是引起问题的主要原因。

如果上升边的退化使得上升边拉长到接近单位间隔，那么就可能产生符号间干扰：

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220110093600.png)

对高速信号质量的评估可以用眼图，可测量误码率（左图为有少许损耗，右图损耗较大）：

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220110104943.png)

### 传输线中的损耗

当信号沿传输线传播时，接收端有以下 5 种能量损耗的方式：

1. 辐射损耗
2. 耦合到相邻走线
3. 阻抗不匹配
4. 导线损耗
5. 介质损耗

#### 导线损耗（导线电阻与趋肤效应）
